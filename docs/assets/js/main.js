"use strict";const inputSearch=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-search-btn"),listResults=document.querySelector(".js-list"),listResultsFavs=document.querySelector(".js-list-favs"),btnReset=document.querySelector(".js-reset-btn");let dataList=[],dataListFavs=[];fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita").then(t=>t.json()).then(t=>{dataList=t.drinks,renderList(dataList)});const favStored=JSON.parse(localStorage.getItem("favourites"));function renderList(t){listResults.innerHTML="";for(const e of t){const t=buildDrinkLi(e);t.addEventListener("click",handleClickFav);dataListFavs.some(t=>t.idDrink===e.idDrink)&&t.classList.add("fav-drink"),listResults.appendChild(t)}}function buildDrinkH3(t){const e=document.createElement("h3");e.setAttribute("class","js-item-name item-name");const i=document.createTextNode(t);return e.appendChild(i),e}function buildDrinkImg(t){const e=document.createElement("img");return e.setAttribute("class","js-img-drink img-drink"),t||(t="https://via.placeholder.com/300x300/ffffff/666666/?text=Cocktail"),e.setAttribute("src",t),e.setAttribute("alt","Imagen cÃ³ctel"),e}function buildDrinkLi(t){const e=document.createElement("li");e.setAttribute("class","card-drink"),e.setAttribute("id",t.idDrink);const i=buildDrinkH3(t.strDrink),s=buildDrinkImg(t.strDrinkThumb);return e.appendChild(i),e.appendChild(s),e}function handleClickSearch(t){t.preventDefault();const e="https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+inputSearch.value;fetch(e).then(t=>t.json()).then(t=>{dataList=t.drinks,renderList(dataList)})}function renderListFavs(t){listResultsFavs.innerHTML="";for(const e of t){const t=buildDrinkLi(e),i=document.createElement("button");i.textContent="X",i.setAttribute("id",e.idDrink),i.setAttribute("class","btn-delete"),i.addEventListener("click",handleClickDeleteFav),t.appendChild(i),listResultsFavs.appendChild(t)}localStorage.setItem("favourites",JSON.stringify(t))}function handleClickFav(t){t.preventDefault();const e=t.currentTarget;e.classList.toggle("fav-drink");const i=dataList.find(t=>t.idDrink===e.id),s=dataListFavs.findIndex(t=>t.idDrink===e.id);-1===s?dataListFavs.push(i):dataListFavs.splice(s,1),renderListFavs(dataListFavs)}function handleClickReset(t){t.preventDefault(),dataListFavs=[],localStorage.removeItem("favourites"),listResultsFavs.innerHTML="",dataList=[],renderList(dataList)}function handleClickDeleteFav(t){t.preventDefault();const e=t.currentTarget,i=dataListFavs.findIndex(t=>t.idDrink===e.id);dataListFavs.splice(i,1),localStorage.setItem("favourites",JSON.stringify(dataListFavs));e.parentElement.remove(),renderList(dataList)}favStored&&(dataListFavs=favStored,renderListFavs(dataListFavs)),btnSearch.addEventListener("click",handleClickSearch),btnReset.addEventListener("click",handleClickReset);